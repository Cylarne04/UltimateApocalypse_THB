----------------------------------------
-- File: 'orktitantactic.ai'
-- Created by Cylarne_04 @ 2014

class 'OrkTitanTactic' (OrkVehicleTactic)

OrkTitan = {}

function OrkTitanTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Ork Titan Tactic")
	
	-- Vehicle is a heavy transport
	self.m_iTransportVehicle = 1
	self.m_iTransportSlots = 2
end

function OrkTitanTactic:InitAbilities()

	-- Init ability ID's
	if (OrkTitan.laymines == nil) then
		OrkTitan.laymines = cpu_manager.stats:GetAbilityID( "ork_laymines" )
	end
	
	if (OrkTitan.shield == nil) then
		OrkTitan.shield = cpu_manager.stats:GetAbilityID( "ork_super_chargy" )
	end
end

function OrkTitanTactic:DoAbilities()
	
	local iRequisition = resource_manager:GetResourceAmount():Get( ResourceAmount.RT_Requisition )
	local iPower = resource_manager:GetResourceAmount():Get( ResourceAmount.RT_Power )
	
	-- Try to activate abilities.
	if (self.squad_ai:CanDoAbility(OrkTitan.laymines)) then
		if (iRequisition >= 800 and iPower >= 200 and self:IsMoving()) then
			self.squad_ai:DoSpecialAbility(OrkTitan.laymines)
		end
	end
	
	if (self.squad_ai:CanDoAbility(OrkTitan.shield) and self.squad_ai:IsInCombat() and self.squad_ai:WasRecentlyHurt()) then
		self.squad_ai:DoSpecialAbility(OrkTitan.shield)
	end
end

function OrkTitanTactic:AlwaysAttack()
	return true
end
