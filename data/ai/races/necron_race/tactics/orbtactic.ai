----------------------------------------
-- File: 'orbtactic.ai'
-- Edited by Cylarne @ 12-31-2010

class 'OrbTactic' (NecronVehicleTactic)

Orb = {}

function OrbTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Orb Tactic")
end

function OrbTactic:InitAbilities()

	-- Init ability ID's
	if (Orb.whips_id == nil) then
		Orb.whips_id = cpu_manager.stats:GetAbilityID( "necron_doomsday_whips" )	
	end

	if (Orb.annihilator_id == nil) then
		Orb.annihilator_id = cpu_manager.stats:GetAbilityID( "necron_solar_annihilator" )	
	end
	
	if (Orb.annihilator2_id == nil) then
		Orb.annihilator2_id = cpu_manager.stats:GetAbilityID( "necron_solar_annihilator_alternative1" )	
	end
	
	if (Orb.beam_id == nil) then
		Orb.beam_id = cpu_manager.stats:GetAbilityID( "necron_destructor_beam" )	
	end
end

function OrbTactic:DoAbilities()

	local iPower = resource_manager:GetResourceAmount():Get( ResourceAmount.RT_Power )

	Ability.DoAbility( self.squad_ai, Orb.whips_id, Ability.Filters.IsInCombat )
	
	if (iPower >= 5000) then
		Ability.DoAbilityArea( self.squad_ai, Orb.annihilator2_id, Ability.Filters.CloseEnemy, 20 )
	else
		Ability.DoAbilityArea( self.squad_ai, Orb.annihilator_id, Ability.Filters.CloseEnemy, 6 )
	end
	Ability.DoAbilityTarget( self.squad_ai, Orb.beam_id, Ability.Filters.CloseEnemy, 10 )
end
